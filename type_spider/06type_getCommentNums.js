////第6步 commentNums,保存为type_cNO.json,原文件缺失的清单type_erro_id.json
// 

// 
const fs=require('fs');//读写文件
var cheerio=require('cheerio');//解析html
var items=[];

var count=2;//先了解共有几组数据 count:0表示一个数据
var _id=["58407117","67315987","66648956","32315163","4081903","57965167","67962832","35642453","68927924","5677156","67809274","66239857","67039066","24659941","66354170","27283982","67322973","66941136","66775527","66027214","2192464","67184606","23496975","20874260","23622015","18995012","66091422","22798207","22946964","13894137","13785208","57554259","17754312","17669087","17736779","58473145","2695108","67797818","21177332","67751559","68222735","68177084","67979400","4105280","66580814","58724963","66534885","23722231","51461359","19614484","19327160","66175829","5228494","58490804","21093983","23063969","65737779","69045554","18366275","4061974","8846193","58390004","67029267","24031186","21342769","32475893","3691228","65821855","67561863","32664910","67294064","22073606","58676891","27168893","21787112","21965624","5307548","8995198","19399898","67824511","1901167","35098953","32850422","67752438","66526640","66393006","32489888","68995285","68950410","23366960","23366960","23881853","66934023","21665319","42368164","69012464","19168793","26965225","1903315","23748948","19317736","67794278","26230947","57518255","15112706","33600190","1901197","68111049","65639137","68004587","24861836","67518877","66846271","67656731","58412642","43623347","67134099","3161785","58648118","59401203","22723884","57953283","4547314","58719559","3026560","65413935","67208959","65681974","22066796","9640959","52342524","38155510","59430780","67703323","68934882","66810024","67840949","43555925","32488770","45253759","66761234","5414099","2654419","1905370","1902862","32475423","66143784","68968223","57529680","23754468","66320949","67638840","66234576","67691047","66670051","18245821","1959289","4498723","6409153","65966304","32510815","38083118","68137124","37801026","17784976","5866069","50253489","32315417","67061747","59108741","23353755","67478592","17827196","58964528","18245675","1902823","3687463","4115788","27033904","22735516","21330258","21004703","15111855","6015761","27024639","1900363","68109822","22690049","32373351","56916081","23099349","66938953","27499174","58320264","46954478","27228801","65486265","32320901","57040041","66848005","66042509","67473418","18038720","59254464","1901203","18174136","3172627","65970481","4102154","5238608","13888367","69128913","66702999","56637817","21053153","45255058","38086398","21160754","24338131","67442772","24994915","68200526","20854058","42612704","38220353","38233432","46217848","27284223","17700902","3156976","67741495","19491014","58566891","68679432","23973641","65814157","66058739","57715580","21736892","32501319","24703458","38087778","20678145","66347580","19407999","32479113","67058863","67152745","67109733","19167717","19638174","21308002","67636454","3322378","6818244","2767468","21730347","2545675","13911408","38062568","66115906","19791052","67198802","57290002","32373444","21732001","67080043","66346618","66054136","45832688","68994733","67856783","36821129","67261784","21210924","58777634","23617271","56235212","68165369","23881663","67749955","46978938","2275312","9617818","65776809","32674698","24998338","1795396","67874172","48128461","67579080","67335272","67224156","32476948","66369872","38154993","57247330","65766126","57405802","27274674","23608006","5638876","38051480","21677960","66623376","27430867","67557508","37765180","10010603","67809299","69208014","69128979","67676746","66037607","23112067","32497360","24955781","57461448","59297904","68215162","23111097","68022343","66240645","15127909","19152944","32560415","67117044","23713225","27230264","24987549","32780580","21683659","24922936","66374786","4292931","23966385","58417291","5621345","22392805","4170950","32306167","22179807","66487476","3035095","3683344","15132551","24710973","66859388","67510490","65843006","67027453","66090758","66894947","67467364","50773510","48150763","65838377","67942083","67340514","66476178","50939107","19001691","67663277","58622390","66785579","38103422","59033275","27303250","37790464","54316864","20950335","4737549","22942814","32340266","43606502","27542420","56589950","42626994","65709822","27432143","56590179","58581851","46451099","50256190","66299065","27453267","48228601","21647688","18641378","58056904","28634675","57423522","66660827","52352741","17655990","67580111","32308242","67663238","45322567","66925421","23086926","24986952","20960289","67348657","33507817","55873496","23354700","66581518","32841451","32407174","2419042","3379021","5293921","58046966","66402341","37525651","28593927","65966917","4199870","32774849","60274602","3276715","23668492","65553490","67990010","67274809","24803982","51627676","32330978","22456893","25035526","27383454","21997669","22914466","67741556","19349216","66213344","66298283","58467640","23964987","37765538","27349683","23906000","21161018","68056944","8075967","27228569","5239407","67264811","23912141","24959956","66696296","2356651","23484476","22743620","23420685","42725491","14980685","58553119","52347800","24971948","22510300","59285207","59305238","23651447","58405748","45245947","66987331","58344008","67274754","59290426","18218974","22509817","22992988","68191351","42604999","66089105","66406519","57192305","23406809","27530234","66603539","24337119","13914739","57736047","22595015","42606768","17953061","67628865","27026913","21046418","65414032","65680019","67896146","22595102","23300938","27480281","32488895","24749537","63175864","37170244","59039976","2325580","4757296","48233284","56589280","67335440","52891079","67199372","23715614","66586902","24619329","66208870","23434196","27279111","65959451","24513894","59200450","68239655","23351669","24631960","65869317","24645378","66868228","22383172","58397508","32758196","66375512","48217808","50772963","52348831","66819610","22650944","58002601","66914063","23543044","66262966","59161244","67321222","67299608","20779291","23019660","9001997","55783716","21941962","28425731","59018968","48150115","66623783","66047189","33506490","65481598","22369688","32564571","57760044","32638433","58176811","24951463","32882047","65568358","23406793","58617634","23210468","38062645","23510976","58497119","65976049","38061961","66684688","23112369","27180520","21839593","24295881","67139242","39260915","38202841","43612125","8066057","67704510","32404425","24943384","45826935","43609922","19641938","24965719","37946968","67230881","22805894","5664858","23943504","43609898","13906874","38224956","21050188","20716521","23192220","19816214","27520171","20846889","19289390","24078468","21720464","27288508","24786617","4052092","17710715","56800193","23738480","66090751","66482547","23186404","38224593","32551546","32551531","57542719","59226504","58252774","66089334","65935989","57542609","24814071","32560493","57542664","22764281","65562287","48008034","59132186","57401384","66056748","24708098","22786471","66622174","58477090","65316674","23744065","57660375","33577621","67321525","67234997","17649234","23612458","68040020","18968550","27532406","26230821","43597044","32460671","58345020","66867200","43608277","33708724","21680294","27334915","58385132","32868548","32867434","23973747","22921280","34354294","22687341","23599469","27202645","57385938","66862983","65832083","56637585","24957075","21284369","45259525","65783606","38494094","17876733","27011373","66285562","48230193","27011464","59151240","59140073","32489073","32319115","22490174","21569978","18111546","32551509","57901923","22890618","66798847","23422312","57773342","57967056","65966231","67511798","58539451","43623718","66907888","59148095","67925583","65594222","67306915","32585428","22517744","66108560","65734821","58963481","28634845","66806909","24313334","24805843","48215810","59182241","27498459","67052672","23101166","59096178","23090484","66294121","23515790","65969317","43597621","65610006","65610006","57440094","65610403","67104001","18496676","65420463","65486810","27227503","22823160","63170252","27347480","39267194","66574729","27511239","67097829","13799609","65802519","58375519","57381616","56585294","58428866","66541732","66158336","67055082","23077960","65593756","62814955","57838570","27469324","58232234"];

var _cNO=1;
//cNO all
var _TYPE="keepfit";
var path=[];
var erro_id=[];

for (var i = _id.length - 1; i >= 0; i--) {

	 path.push("./"+_TYPE+"_page/"+_id[i]+"=1p.html");
	
	
	
};

 


for (var i = path.length - 1; i >= 0; i--) {
	 
	


	try {
    	var htmlfile=fs.readFileSync(path[i]);
    	
		var url_id=path[i].replace('./'+_TYPE+'_page/','').replace('=1p.html','');
		var $ = cheerio.load(htmlfile);

		var commentnos=$('.active').text();
		
		//console.log(i);
		items.push({
			"id":url_id,
			"cnums": commentnos

		});
		    
		  // console.log("00"+items.length); 

	} catch (err) {
		console.log(path[i]+"-------------------------------------------------");
		erro_id.push(path[i].replace('./'+_TYPE+'_page/','').replace('=1p.html',''));
	    console.error(err);
	}

	 
	fs.writeFile("./public/data/"+_TYPE+"_cNO"+_cNO+".json",JSON.stringify(items),function(err){
					    if(!err)
					    console.log("done!!!!!!"+items.length)
					});
	fs.writeFile("./public/data/"+_TYPE+"_erro_id.json",JSON.stringify(erro_id),function(err){
					    if(!err)
					    console.log("erro!!!!!!"+erro_id.length)
					});

};



