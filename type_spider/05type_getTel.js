////第5步 tel,保存为type_tel.json,原文件缺失的清单type_erro_id.json
// 

// 
const fs=require('fs');//读写文件
var cheerio=require('cheerio');//解析html
var items=[];

var count=1050;//先了解共有几组数据 count:0表示一个数据
var _id=["10655220","5593559","14074385","22690010","58535879","4068295","2120095","14841619","14646590","14946915","17609691","48017743","3383698","20921377","4300619","34454598","23348019","3245881","6022269","19662012","14646549","24351752","18559852","4221387","17948668","32509967","5428016","5347840","43597807","14071728","2691817","38167982","67775778","15608986","4705238","38189515","18443631","23384762","3297952","10330015","58696299","44499992","5924435","59026805","15864899","4716927","3595264","23408490","16717062","2990641","3247090","2545906","66802603","56868769","48232296","4666853","19147566","57293915","2614120","4116507","58422025","57954514","3214804","59252545","5291131","57560063","2929384","18973951","3169264","38166986","2553592","23354114","14946943","4655204","4730444","3247684","3383575","3449899","27281671","3499294","24704659","67416170","17200101","14066045","58278101","27267963","16667630","3430111","66659605","38172170","22816513","5743580","57216351","21939286","4562473","5391265","2705578","45304751","44769236","4117709","14998615","14999788","14064967","13919866","38194135","4118260","6119485","6324680","2553532","13718242","4507817","23471935","22675214","14830254","3023569","6324641","18013504","18977710","32544151","14999092","19605955","2647954","3512095","6324659","38195023","57539330","57562030","8945378","58726244","2812927","3524977","23675416","10341579","21173404","44628815","57251820","13877663","14945004","8070396","6120857","5242441","2646214","22467507","23436004","22354714","19565306","5193238","23648121","58275062","44662299","27375345","18773662","7998792","14998944","23637162","3688798","65605966","4107687","14999512","6134561","44464647","22049558","3248809","8695466","64802125","38308269","21943231","17329427","5229188","17885189","14998987","22897044","21269600","2904859","2578966","19267160","23483257","14845278","24979043","18026840","5593996","16460652","56953550","2837647","58358725","14778850","19142555","23008983","19831596","3210943","49407153","14066749","5535178","24047856","48459115","2553673","5401113","8066967","22263239","15608878","22238655","65555690","44522110","14943871","5101492","2723599","4686473","22780880","2932057","23483353","4197428","23482896","17685597","66633653","19464867","52715049","16356323","14998617","5679172","3303841","10345724","4039642","44919747","4107531","8714579","13873426","5254627","58021559","2644372","6211308","24880906","4564587","4705212","22724163","5242161","5553095","57930831","57143618","5997100","22690901","38437369","3383335","2614591","65624690","3143998","38420322","13852377","6065819","18081443","5190793","38177251","45131473","68234494","16473469","4013287","2996767","4283052","2675884","58897214","19190922","19350176","67830485","3245857","21089745","15990739","23483270","45256878","59044012","4507403","66459239","14791889","17818246","21340724","5587930","32449371","3089116","15997061","3379837","3245056","23884582","27031445","10665774","62223457","57826586","23482892","23369438","2639314","22196358","5494800","2987185","18249656","4522045","66952243","5255622","2593156","3282430","27430355","6239243","38423370","44490235","3202432","45052828","58264318","24112850","23212016","20951772","3094294","8953754","57845965","6275906","5242246","4667545","3247219","2604835","2960947","21051459","18658339","8696837","5331318","23225407","3921730","3290122","24030891","14998979","17766034","32771633","8907759","23485564","17704369","21737076","15107391","44491992","3088789","5317971","5734839","18616962","2648497","21943330","5722139","14744924","61895745","5137342","14894729","2700391","23931134","3195121","19630884","3483319","19281390","16657007","21050146","22567476","16335950","23081420","14946422","14946491","44553081","16042766","4117622","6062733","2911084","2955133","4187895","5242377","54327632","21782670","4296426","4104674","8944733","66297591","23482600","14646568","65486148","9521559","59033360","4534114","3673879","2666722","18124091","5247331","5593766","27292511","21166302","3136543","13786258","3246889","2553847","4514190","19119855","27219567","6988086","4272610","4053712","24294712","4507363","13818508","15861676","5270633","37792830","14998891","4556612","45575161","5263523","23483210","27242160","65863073","5242166","5717119","38165144","5242187","66945422","5682796","3248773","13824888","43548920","44391051","19184786","16211461","14941020","3383296","11576635","3011626","23483242","57292898","5671715","14999019","19430906","14066611","59147685","3374017","23136354","23659900","9976614","3250102","17681102","3383755","3248197","14941660","52705749","65590691","13834218","5685251","17152308","57410830","1896196","6158431","14830136","5609424","18674189","2691202","13826490","28632510","14999437","2673133","8074256","2488252","5738691","5206739","3268471","54827879","4714372","19056083","3246781","3214837","14407787","6242357","3214789","14909215","2827981","25903813","13784789","45075747","3088726","23990701","17765028","4700399","14745003","6183858","2567101","23482601","2582671","14868768","2715091","6119073","3284257","2954857","26974404","21943258","4706403","58223915","66996126","16171170","5629678","14909206","38190862","2620498","5872817","23115861","44515131","6184302","2491057","38438446","3460636","3311764","8942661","24348459","6082539","3246802","44562679","3352582","27499692","11575706","22666273","5235472","2598157","17857429","21633454","57539686","23920295","2946235","38092140","3247237","1798486","2662282","19298303","5236205","20963025","23067513","3470794","22963625","5938909","23679953","3247282","13822752","43625916","44682327","13714499","3667318","3202084","2515039","44011781","5241895","4513958","17713011","3095491","19474863","6000910","3433285","18177885","22703933","5363223","4554515","57920741","14999330","14066505","67110793","32413337","14999047","44583022","3539656","44791715","14829880","44780053","69255891","68203367","38199304","69253616","59255835","14869334","16125782","38172099","45095836","57922041","38101401","44874538","65478137","44874538","67039470","38194511","16674931","16511038","66611124","16220521","58250660","44812120","57628022","16079345","11561485","14791264","44656238","22186005","20942337","38199848","69227377","66717408","48218697","14777541","44550244","67476437","45089893","9965348","19012321","16373489","3294025","41542366","44423342","48838366","48466880","67304801","27208531","59058457","4120952","27030968","16469021","14406747","15608984","3383743","24038371","49575936","16700586","50526333","21798635","16701560","22235370","4214495","67959562","23483032","66494285","57709901","16146486","44582604","17597768","69228905","14830065","66655814","66695315","67521260","38438921","24097439","65626389","69074452","66666491","66629266","2646238","66456880","38427105","57925710","65479178","16666653","66955091","13704086","18600675","67815036","5240265","37930389","17589461","24629026","16701460","21359968","19638464","66817410","66717371","14799510","59279571","27383190","57930829","24664327","58241360","38437840","44781355","69159117","5241846","66134760","14814160","66645623","67602722","13907061","22310160","69216548","8835987","14829901","69164950","44861450","6324702","66897279","21792695","38106587","67462218","14793166","5242351","66816791","44816128","68133828","2553547","3383680","5566458","23631364","68926285","3352141","48087776","14998964","20724687","3666883","14074608","68143384","66769452","5516471","14070760","6324733","2646223","21930417","38425304","45031580","4123334","50155862","10344471","4291383","16554516","32574789","14065001","16168995","24678722","27433650","22177570","14073461","67876583","57920081","68929037","68223468","59163207","68991931","66451365","23482618","67154051","67635071","38198786","38204144","66625414","16697609","4122824","32419909","14999301","4520295","22934906","45217148","69217498","14830119","6595105","32514888","5634639","5242272","3462205","5430693","67745199","66050055","58259868","19189978","24792057","2972083","8916023","67844164","67627330","65314551","17672163","14999739","10827091","13669146","14830082","22675438","65721533","2645950","57924925","67211426","23482620","17814426","57931906","66769123","14067501","45232954","44543205","67110039","66857827","23353982","68198260","67617094","4540052","14407672","67304777","17349342","67920740","3448027","65685433","5241380","18675398","14077421","8010239","15092363","48413901","5641414","2646202","5281053","14940941","44666004","66834297","23878350","32560257","38418556","66840241","3901873","66352725","32422030","67253917","66873576","67801289","69141516","59043239","66096289","8885621","21119244","22922036","14067685","66822447","67737149","18981672","23464088","38418921","65830398","19825298","5242409","24838581","18365781","67347357","2562634","19180096","67061909","50594133","44683620","18243832","4134149","57932811","17626318","69009337","48933830","22307273","14881737","32406987","24307202","65845335","46966659","2922217","57566616","58192623","16700086","67808782","4516573","65597294","69124272","5241973","67357761","5721905","10635864","27031156","5955645","6059982","14999610","68150277","16586912","23540660","4559203","66100241","57349690","3245872","13848786","57606269","67353694","32640180","22104959","23482920","49569868","5168973","57151903","13708708","14999274","15104439","57451291","3352144","37770755","14065252","32941723","21311987","64212415","17406002","67310818","62237353","66824366","45303759","67639014","15094803","14069891","23485350","49032644","3247186","6049160","67426555","67443227","45001492","24798707","22877831","20837714","58274959","37113197","38113636","5343915","5855946","2587897","69087502","3439240","59093671","3094840","14646523","8988549","2906530","57928551","18031206","3517693","67899037","5594028","13775202","67490438","57930907","20944443","68497849","57560087","58875862","17685014","2560759","14830529","5438711","17697692","5242352","66661511","4533435","4689963","3088855","17644306","22423770","44760236","6181949","57853039","6452948","67040596","44836360","13750047","27293154","6301582","65649890","56923975","2998507","14830442","37802771","67188356","14999702","23482721","13891381","18664616","67383478","14070499","6037210","38205914","32770079","23745346","6056627","67458457","3296053","58902305","67160588","4222677","17820349","2833888","67081235","67242623","3244477","68065307","23965823","49249138","68143537","8049571","2943364","15608891","66350299","13929969","3248209","4561043","52783708","3246400","3319117","48748380","22440967","22816577","43604594","67055154","23483062","66934101","66651561","66913359","67977385","5169827","66615944","2833969","21336020","7633453","2736019","22058205","66812818","5320508","24261730","14946289","4515940","44491909","38309403","57660846","2861731","4180030","50046078","21385469","14999126","45020942","5531343","68241316","44981966","46947759","66771197","6364818","67556869","3246898","67903354","3327691","66733149","6077795","13882226","67932935","68195605","66826766"];

var _telNo=4;
//tel 1
var _TYPE="jy";
var path=[];
var erro_id=[];

for (var i = _id.length - 1; i >= 0; i--) {

	 path.push("./"+_TYPE+"_page/"+_id[i]+".html");
	
	
	
};

 


for (var i = path.length - 1; i >= 0; i--) {
	 
	


	try {
    	var htmlfile=fs.readFileSync(path[i]);
    	
		var url_id=path[i].replace('./'+_TYPE+'_page/','').replace('.html','');
		var $ = cheerio.load(htmlfile);

		var tel=$('.phone').text();
		//var tel=$('.J_phone .phone').text();
		//console.log(i);
		items.push({
			"id":url_id,
			"tel": tel

		});
		    
		  // console.log("00"+items.length); 

	} catch (err) {
		console.log(path[i]+"-------------------------------------------------");
		erro_id.push(path[i].replace('./'+_TYPE+'_page/','').replace('.html',''));
	    console.error(err);
	}

	 
	fs.writeFile("./public/data/"+_TYPE+"_tel"+_telNo+".json",JSON.stringify(items),function(err){
					    if(!err)
					    console.log("done!!!!!!"+items.length)
					});
	fs.writeFile("./public/data/"+_TYPE+"_erro_id.json",JSON.stringify(erro_id),function(err){
					    if(!err)
					    console.log("erro!!!!!!"+erro_id.length)
					});

};



